const languageData = {
  EN: {
    Title: "THE GLOBAL ADVOCACY DATA HUB",
    heroTitle: "The Global Advocacy Data Hub",
    heroSubtitle: "The <span>transparent</span> and <span>independent</span> source of Global Fund data",
    heroDescription: "Communities most impacted by HIV, tuberculosis, and malaria are at the heart of the Global Fund model. This platform provides the information, resources, and data that communities need to advocate for an accountable Global Fund.",
    heroButtonText: "Learn More",
    navHome: "Home",
    navResources: "Resources",
    navAbout: "About",
    aboutTitle: "Who we are:",
    aboutP1: "Communities most impacted by HIV, tuberculosis, and malaria are at the heart of the Global Fund model. Yet communities often face the greatest barriers to meaningful engagement.",
    aboutP2: "The <span>Global Advocacy Data Hub</span> (GADH) is a one-stop shop for communities, advocates, CCM representatives, and other health system stakeholders.  Here you may find publicly-available information, data, guides, and other resources designed to help communities fully participate in decision-making about their lives, communities, and countries.",
    aboutP3: "This web platform is built for advocates, by advocates.",
    aboutButton: "Explore Resources",
    resourcesTitle: "Resources",
    resourcesLooking: "I'm looking for: ",
    resourcesDropDashboards: "Dashboards",
    resourcesDropGuides: "Guides",
    resourcesDropReports: "Reports",
    resourcesSelect: "Select an option",
    resourcesTitleDashboards: "Dashboards",
    resourcesTitleGuides: "Guides",
    resourcesTitleReports: "Reports",
    resourcesCCMDash: "CCM Dashboard",
    resourcesUQDDash: "UQD Dashboard",
    resourcesR8Dash: "Global Fund Replenishment 8 Scenarios",
    feedbackTitle: "Share your feedback",
    feedbackP1: "This form is for registering questions, challenges, or issues with the Global Fund slow-down or deallocation process. This is an independent community-run initiative meant to document and resolve issues of community exclusion or discrimination.", 
    feedbackP2: "Everything you report is anonymous and we will never share anything without your agreement and consent. If you choose to escalate an issue from your country will can help contact the right people at the Global Fund, connect you with other people having the same issue, and/or advocate on your behalf. Our goal is to support you.",
    calendarTitle: "Calendar",
    resourcesSearchInput: "Search"
  },
  FR: {
    Title: "LE HUB MONDIAL DE DONNEES POUR LE PLAIDOYER",
    heroTitle: "Le Hub Mondial de Données pour le Plaidoyer",
    heroSubtitle: "La source <span>transparente</span> et <span>indépendante</span> des données du Fonds mondial",
    heroDescription: "Les communautés les plus touchées par le VIH, la tuberculose et le paludisme sont au cœur du modèle du Fonds mondial. Cette plateforme fournit les informations, les ressources et les données dont les communautés ont besoin pour plaider en faveur d'un Fonds mondial responsable.",
    heroButtonText: "En savoir plus",
    navHome: "Accueil",
    navResources: "Ressources",
    navAbout: "À propos",
    aboutTitle: "Qui sommes-nous ?",
    aboutP1: "Les communautés les plus touchées par le VIH, la tuberculose et le paludisme sont au cœur du modèle du Fonds mondial. Pourtant, les communautés sont souvent confrontées aux plus grands obstacles à un engagement significatif.",
    aboutP2: "Le <span>Hub Mondial de Données pour le Plaidoyer</span> (GADH) est un guichet unique pour les communautés, les défenseurs, les représentants des ICN et les autres acteurs du système de santé.  Vous y trouverez des informations, des données, des guides et d'autres ressources accessibles au public, conçus pour aider les communautés à participer pleinement à la prise de décisions concernant leur vie, leur communauté et leur pays.",
    aboutP3: "Cette plateforme web est conçue pour les militants, par les militants.",
    aboutButton: "Explorer les ressources",
    resourcesTitle: "Ressources",
    resourcesLooking: "Je cherche : ",
    resourcesDropDashboards: "Tableaux de bord",
    resourcesDropGuides: "Guides",
    resourcesDropReports: "Rapports",
    resourcesSelect: "Sélectionner une option",
    resourcesTitleDashboards: "Tableaux de bord",
    resourcesTitleGuides: "Guides",
    resourcesTitleReports: "Rapports",
    resourcesCCMDash: "Tableau de bord des données sur les ICN",
    resourcesUQDDash: "Tableau de bord UQD",
    resourcesR8Dash: "Scénarios pour la 8e reconstitution du Fonds mondial",
    feedbackTitle: "Partagez vos commentaires",
    feedbackP1: "Ce formulaire est destiné à enregistrer les questions, les défis ou les problèmes liés au processus de ralentissement ou de désaffectation du Fonds mondial. Il s'agit d'une initiative communautaire indépendante destinée à documenter et à résoudre les problèmes d'exclusion ou de discrimination communautaire.",
    feedbackP2: "Tout ce que vous signalez est anonyme et nous ne partagerons jamais rien sans votre accord et votre consentement. Si vous décidez de faire remonter un problème de votre pays, nous pouvons vous aider à contacter les bonnes personnes au Fonds mondial, vous mettre en contact avec d'autres personnes ayant le même problème, et/ou plaider en votre faveur. Notre objectif est de vous soutenir.",
    calendarTitle: "Calendrier",
    resourcesSearchInput: "Rechercher"
  },
  ES: {
    Title: "EL HUB GLOBAL DE DATOS PARA LA DEFENSA",
    heroTitle: "El Hub Global de Datos para la Defensa",
    heroSubtitle: "La fuente <span>transparente</span> e <span>independiente</span> de datos del Fondo Mundial",
    heroDescription: "Las comunidades más afectadas por el VIH, la tuberculosis y la malaria están en el corazón del modelo del Fondo Mundial. Esta plataforma proporciona la información, los recursos y los datos que las comunidades necesitan para abogar por un Fondo Mundial responsable.",
    heroButtonText: "Más información",
    navHome: "Inicio",
    navResources: "Recursos",
    navAbout: "Acerca de",
    aboutTitle: "Quiénes somos:",
    aboutP1: "Las comunidades más afectadas por el VIH, la tuberculosis y la malaria son el núcleo del modelo del Fondo Mundial. Sin embargo, a menudo son ellas las que se enfrentan a los mayores obstáculos para una participación significativa.",
    aboutP2: "El <span>Hub Global de Datos para la Defensa</span> (GADH) es una ventanilla única para comunidades, defensores, representantes de MCP y otras partes interesadas del sistema sanitario.  Aquí podrá encontrar información, datos, guías y otros recursos de acceso público diseñados para ayudar a las comunidades a participar plenamente en la toma de decisiones sobre sus vidas, comunidades y países.",
    aboutP3: "Esta plataforma web ha sido creada por abogados y para abogados.",
    aboutButton: "Explorar recursos",
    resourcesTitle: "Recursos",
    resourcesLooking: "Estoy buscando:",
    resourcesDropDashboards: "Cuadros de mando",
    resourcesDropGuides: "Guías",
    resourcesDropReports: "Informes",
    resourcesSelect: "Seleccione una opción",
    resourcesTitleDashboards: "Cuadros de mando",
    resourcesTitleGuides: "Guías",
    resourcesTitleReports: "Informes",
    resourcesCCMDash: "Cuadro de mando de los datos de MCP",
    resourcesUQDDash: "Cuadro de mandos de UQD",
    resourcesR8Dash: "Escenarios para la 8ª reposición del Fondo Mundial",
    feedbackTitle: "Comparta sus comentarios",
    feedbackP1: "Este formulario es para registrar preguntas, retos o problemas con el proceso de ralentización o reasignación del Fondo Mundial. Se trata de una iniciativa comunitaria independiente destinada a documentar y resolver problemas de exclusión o discriminación comunitaria.",
    feedbackP2: "Todo lo que informe es anónimo y nunca compartiremos nada sin su acuerdo y consentimiento. Si decide plantear un problema desde su país, podemos ayudarle a ponerse en contacto con las personas adecuadas en el Fondo Mundial, ponerle en contacto con otras personas que tengan el mismo problema y/o abogar en su nombre. Nuestro objetivo es apoyarle.",
    calendarTitle: "Calendario",
    resourcesSearchInput: "Buscar"
  },
    SW: {
    Title: "KITOVU CHA DATA CHA UTETEZI WA ULIMWENGUNI",
    heroTitle: "Kitovu cha Data cha Utetezi wa Ulimwenguni",
    heroSubtitle: "Chanzo cha <span>uwazi</span> na <span>inayojitegemea</span> cha data ya Global Fund",
    heroDescription: "Jamii zilizoguswa zaidi na VVU, kifua kikuu, na malaria ziko katika moyo wa modeli ya Global Fund. Jukwaa hili hutoa habari, rasilimali, na data ambazo jamii zinahitaji ili kutetea Global Fund inayowajibika.",
    heroButtonText: "Jifunze Zaidi",
    navHome: "Nyumbani",
    navResources: "Rasilimali",
    navAbout: "Kuhusu",
    aboutTitle: "Sisi ni nani:",
    aboutP1: "Jamii zilizoguswa zaidi na VVU, kifua kikuu, na malaria ziko katika moyo wa modeli ya Global Fund. Hata hivyo, jamii mara nyingi hukabiliwa na vikwazo vikubwa zaidi vya ushiriki wenye maana.",
    aboutP2: "<span>Kitovu cha Data cha Utetezi wa Ulimwenguni</span> (GADH) ni duka la kuzuia kwa jamii, watetezi, wawakilishi wa CCM, na wadau wengine wa mfumo wa afya. Hapa unaweza kupata habari inayopatikana kwa umma, data, miongozo, na rasilimali nyingine zilizoundwa ili kusaidia jamii kushiriki kikamilifu katika maamuzi kuhusu maisha yao, jamii zao, na nchi zao.",
    aboutP3: "Jukwaa hili la wavuti limeundwa kwa ajili ya mawakili, na watetezi.",
    aboutButton: "Chunguza Rasilimali",
    resourcesTitle: "Rasilimali",
    resourcesLooking: "Ninatafuta: ",
    resourcesDropDashboards: "Vidashbodi",
    resourcesDropGuides: "Miongozo",
    resourcesDropReports: "Taarifa",
    resourcesSelect: "Chagua chaguo",
    resourcesTitleDashboards: "Vidashbodi",
    resourcesTitleGuides: "Miongozo",
    resourcesTitleReports: "Taarifa",
    resourcesCCMDash: "Dashbodi ya CCM",
    resourcesUQDDash: "Dashbodi ya UQD",
    resourcesR8Dash: "Mitazamo 8 ya Kuongeza Fedha za Global Fund",
    feedbackTitle: "Shiriki maoni yako",
    feedbackP1: "Fomu hii ni kwa ajili ya kusajili maswali, changamoto, au matatizo na mchakato wa kupunguzwa kwa fedha au kukataliwa kwa Global Fund. Hii ni juhudi zinazoendesha jamii kwa uhuru zinazolenga kurekodi na kutatua matatizo ya ukiukwaji wa haki au ubaguzi dhidi ya jamii.", 
    feedbackP2: "Kila kitu unachoripoti ni isiyo na utambulisho na hatutashiriki chochote bila idhini na ridhaa yako. Ikiwa utachagua kuendeleza suala kutoka nchi yako, tunaweza kusaidia kuwasiliana na watu sahihi katika Global Fund, kukuunganisha na watu wengine wanaokabiliwa na tatizo lile lile, na/au kutetea kwa niaba yako. Lengo letu ni kukusaidia.",
    calendarTitle: "Kalenda",
    resourcesSearchInput: "Tafuta"
  }
};

/* Language functionality */
function changeLanguage(lang) {
  
  // Save language preference to localStorage
  localStorage.setItem('preferredLanguage', lang);
  
  // Helper function to safely update an element if it exists
  function updateElement(id, content, useInnerHTML = false) {
    const element = document.getElementById(id);
    if (element) {
      if (useInnerHTML) {
        element.innerHTML = content;
      } else {
        element.textContent = content;
      }
    }
  }
  
  // Update the active language display
  updateElement('active-language', lang);
  
  // Update the URL without reloading the page
  const url = new URL(window.location);
  url.searchParams.set('lang', lang);
  window.history.pushState({}, '', url);
  
  // Make sure languageData is available
  if (!window.languageData || !window.languageData[lang]) {
    console.error('Language data not available for', lang);
    return;
  }
  
  // Update all UI elements by category
  
  // Landing page and nav bar
  updateElement('title', languageData[lang].Title, true);
  updateElement('hero-title', languageData[lang].heroTitle, true);
  updateElement('hero-subtitle', languageData[lang].heroSubtitle, true);
  updateElement('hero-description', languageData[lang].heroDescription);
  updateElement('hero-button', languageData[lang].heroButtonText);

// Navbar
  updateElement('nav-home', languageData[lang].navHome);
  updateElement('nav-resources', languageData[lang].navResources);
  updateElement('nav-about', languageData[lang].navAbout);

  // About section
  updateElement('about-title', languageData[lang].aboutTitle);
  updateElement('about-p1', languageData[lang].aboutP1, true);
  updateElement('about-p2', languageData[lang].aboutP2, true);
  updateElement('about-p3', languageData[lang].aboutP3, true);
  updateElement('about-button', languageData[lang].aboutButton, true);

  // Resources section
  updateElement('resources-title', languageData[lang].resourcesTitle);
  updateElement('resources-looking', languageData[lang].resourcesLooking);
  updateElement('resources-drop-dashboards', languageData[lang].resourcesDropDashboards);
  updateElement('resources-drop-guides', languageData[lang].resourcesDropGuides);
  updateElement('resources-drop-reports', languageData[lang].resourcesDropReports);
  updateElement('resources-select', languageData[lang].resourcesSelect);
  updateElement('resources-title-dashboards', languageData[lang].resourcesTitleDashboards);
  updateElement('resources-title-guides', languageData[lang].resourcesTitleGuides);
  updateElement('resources-title-reports', languageData[lang].resourcesTitleReports);
  updateElement('resources-ccmdash', languageData[lang].resourcesCCMDash);
  updateElement('resources-uqddash', languageData[lang].resourcesUQDDash);
  updateElement('resources-r8dash', languageData[lang].resourcesR8Dash);
  updateElement('resources-searchinput', languageData[lang].resourcesSearchInput);

  // Update the placeholder of the search input field
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.setAttribute('placeholder', languageData[lang].resourcesSearchInput);
  }

  // GF Feedback
  updateElement('feedback-title', languageData[lang].feedbackTitle);
  updateElement('feedback-p1', languageData[lang].feedbackP1);
  updateElement('feedback-p2', languageData[lang].feedbackP2);

  // Calendar
  updateElement('calendar-title', languageData[lang].calendarTitle);


}
    

// Function to initialize language on page load
function initializeLanguage() {
  // First check URL parameter
  const params = new URLSearchParams(window.location.search);
  const urlLang = params.get('lang');
  
  // Then check localStorage
  const storedLang = localStorage.getItem('preferredLanguage');
  
  // Choose language with priority: URL > localStorage > default ('EN')
  const lang = storedLang || urlLang  || 'EN';
  
  console.log('Initializing language:', lang, 
    urlLang ? '(from URL)' : 
    storedLang ? '(from localStorage)' : 
    '(default)');
  
  // Apply the selected language
  changeLanguage(lang);
}

  /* Langauge (end) */
// Make sure languageData is accessible globally
window.languageData = languageData;