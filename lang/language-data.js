const languageData = {
  EN: {
    Title: "THE GLOBAL ADVOCACY DATA HUB",
    heroTitle: "The Global Advocacy Data Hub",
    heroSubtitle: "The <span>transparent</span> and <span>independent</span> source of Global Fund data",
    heroDescription: "Communities most impacted by HIV, tuberculosis, and malaria are at the heart of the Global Fund model. This platform provides the information, resources, and data that communities need to advocate for an accountable Global Fund.",
    heroButtonText: "Learn More",
    navHome: "Home",
    navResources: "Resources",
    navAbout: "About",
    aboutTitle: "Who we are:",
    aboutP1: "Communities most impacted by HIV, tuberculosis, and malaria are at the heart of the Global Fund model. Yet communities often face the greatest barriers to meaningful engagement.",
    aboutP2: "The <span>Global Advocacy Data Hub</span> (GADH) is a one-stop shop for communities, advocates, CCM representatives, and other health system stakeholders.  Here you may find publicly-available information, data, guides, and other resources designed to help communities fully participate in decision-making about their lives, communities, and countries.",
    aboutP3: "This web platform is built for advocates, by advocates.",
    aboutButton: "Explore Resources",
    resourcesTitle: "Resources",
    resourcesLooking: "I'm looking for: ",
    resourcesDropDashboards: "Dashboards",
    resourcesDropGuides: "Guides",
    resourcesDropReports: "Reports",
    resourcesSelect: "Select an option",
    resourcesTitleDashboards: "Dashboards",
    resourcesTitleGuides: "Guides",
    resourcesTitleReports: "Reports",
    resourcesCCMDash: "CCM Dashboard",
    resourcesUQDDash: "UQD Dashboard",
    resourcesR8Dash: "Global Fund Replenishment 8 Scenarios",
    feedbackTitle: "Share your feedback",
    feedbackP1: "The Global Fund is taking several steps to respond to the uncertain financial landscape.  This includes slowing down implementation, deallocation funds from countries, and reprioritizing activities.",
    feedbackP2: "Please use this form to ask any questions about the process, to share any challenges or barriers to engagement, and to request additional support from the GADH and its partners.  <span>You may share information anonymously</span> or with your contact information.  Even if you do share personal information, nothing you share in this form will be shared with the Global Fund or the CCM, unless formally agreed.",
    calendarTitle: "Calendar"
  },
  FR: {
    Title: "LE HUB MONDIAL DE DONNEES POUR LE PLAIDOYER",
    heroTitle: "Le Hub Mondial de Données pour le Plaidoyer",
    heroSubtitle: "La source <span>transparente</span> et <span>indépendante</span> des données du Fonds mondial",
    heroDescription: "Les communautés les plus touchées par le VIH, la tuberculose et le paludisme sont au cœur du modèle du Fonds mondial. Cette plateforme fournit les informations, les ressources et les données dont les communautés ont besoin pour plaider en faveur d'un Fonds mondial responsable.",
    heroButtonText: "En savoir plus",
    navHome: "Accueil",
    navResources: "Ressources",
    navAbout: "À propos",
    aboutTitle: "Qui sommes-nous ?",
    aboutP1: "Les communautés les plus touchées par le VIH, la tuberculose et le paludisme sont au cœur du modèle du Fonds mondial. Pourtant, les communautés sont souvent confrontées aux plus grands obstacles à un engagement significatif.",
    aboutP2: "Le <span>Hub Mondial de Données pour le Plaidoyer</span> (GADH) est un guichet unique pour les communautés, les défenseurs, les représentants des ICN et les autres acteurs du système de santé.  Vous y trouverez des informations, des données, des guides et d'autres ressources accessibles au public, conçus pour aider les communautés à participer pleinement à la prise de décisions concernant leur vie, leur communauté et leur pays.",
    aboutP3: "Cette plateforme web est conçue pour les militants, par les militants.",
    aboutButton: "Explorer les ressources",
    resourcesTitle: "Ressources",
    resourcesLooking: "Je cherche : ",
    resourcesDropDashboards: "Tableaux de bord",
    resourcesDropGuides: "Guides",
    resourcesDropReports: "Rapports",
    resourcesSelect: "Sélectionner une option",
    resourcesTitleDashboards: "Tableaux de bord",
    resourcesTitleGuides: "Guides",
    resourcesTitleReports: "Rapports",
    resourcesCCMDash: "Tableau de bord des données sur les ICN",
    resourcesUQDDash: "Tableau de bord UQD",
    resourcesR8Dash: "Scénarios pour la 8e reconstitution du Fonds mondial",
    feedbackTitle: "Partagez vos commentaires",
    feedbackP1: "Le Fonds mondial prend plusieurs mesures pour répondre à l'incertitude du paysage financier.  Il s'agit notamment de ralentir la mise en œuvre, de désaffecter les fonds des pays et de redéfinir les priorités des activités.",
    feedbackP2: "Veuillez utiliser ce formulaire pour poser des questions sur le processus, pour faire part des défis ou des obstacles à l'engagement et pour demander un soutien supplémentaire de la part de la GADH et de ses partenaires.  Vous pouvez partager des informations de manière anonyme ou avec vos coordonnées.  Même si vous communiquez des informations personnelles, rien de ce que vous indiquez dans ce formulaire ne sera communiqué au Fonds mondial ou à l'ICN, sauf accord formel.",
    calendarTitle: "Calendrier"
  },
  ES: {
    Title: "EL HUB GLOBAL DE DATOS PARA LA DEFENSA",
    heroTitle: "El Hub Global de Datos para la Defensa",
    heroSubtitle: "La fuente <span>transparente</span> e <span>independiente</span> de datos del Fondo Mundial",
    heroDescription: "Las comunidades más afectadas por el VIH, la tuberculosis y la malaria están en el corazón del modelo del Fondo Mundial. Esta plataforma proporciona la información, los recursos y los datos que las comunidades necesitan para abogar por un Fondo Mundial responsable.",
    heroButtonText: "Más información",
    navHome: "Inicio",
    navResources: "Recursos",
    navAbout: "Acerca de",
    aboutTitle: "Quiénes somos:",
    aboutP1: "Las comunidades más afectadas por el VIH, la tuberculosis y la malaria son el núcleo del modelo del Fondo Mundial. Sin embargo, a menudo son ellas las que se enfrentan a los mayores obstáculos para una participación significativa.",
    aboutP2: "El <span>Hub Global de Datos para la Defensa</span> (GADH) es una ventanilla única para comunidades, defensores, representantes de MCP y otras partes interesadas del sistema sanitario.  Aquí podrá encontrar información, datos, guías y otros recursos de acceso público diseñados para ayudar a las comunidades a participar plenamente en la toma de decisiones sobre sus vidas, comunidades y países.",
    aboutP3: "Esta plataforma web ha sido creada por abogados y para abogados.",
    aboutButton: "Explorar recursos",
    resourcesTitle: "Recursos",
    resourcesLooking: "Estoy buscando:",
    resourcesDropDashboards: "Cuadros de mando",
    resourcesDropGuides: "Guías",
    resourcesDropReports: "Informes",
    resourcesSelect: "Seleccione una opción",
    resourcesTitleDashboards: "Cuadros de mando",
    resourcesTitleGuides: "Guías",
    resourcesTitleReports: "Informes",
    resourcesCCMDash: "Cuadro de mando de los datos de MCP",
    resourcesUQDDash: "Cuadro de mandos de UQD",
    resourcesR8Dash: "Escenarios para la 8ª reposición del Fondo Mundial",
    feedbackTitle: "Comparta sus comentarios",
    feedbackP1: "El Fondo Mundial está tomando varias medidas para responder al incierto panorama financiero.  Entre ellas se incluyen la ralentización de la ejecución, la reasignación de fondos de los países y el replanteamiento de las prioridades de las actividades.",
    feedbackP2: "Utilice este formulario para plantear cualquier pregunta sobre el proceso, compartir cualquier reto o barrera a la participación y solicitar apoyo adicional del GADH y sus socios.  Puede compartir la información de forma anónima o con sus datos de contacto.  Incluso si comparte información personal, nada de lo que comparta en este formulario será compartido con el Fondo Mundial o el MCP, a menos que se acuerde formalmente.",
    calendarTitle: "Calendario"
  }
};

/* Language functionality */
function changeLanguage(lang) {
  console.log('changeLanguage function called with lang:', lang);
  
  // Save language preference to localStorage
  localStorage.setItem('preferredLanguage', lang);
  console.log('Language preference saved to localStorage:', lang);
  
  // Helper function to safely update an element if it exists
  function updateElement(id, content, useInnerHTML = false) {
    const element = document.getElementById(id);
    if (element) {
      if (useInnerHTML) {
        element.innerHTML = content;
      } else {
        element.textContent = content;
      }
    }
  }
  
  // Update the active language display
  updateElement('active-language', lang);
  
  // Update the URL without reloading the page
  const url = new URL(window.location);
  url.searchParams.set('lang', lang);
  window.history.pushState({}, '', url);
  
  // Make sure languageData is available
  if (!window.languageData || !window.languageData[lang]) {
    console.error('Language data not available for', lang);
    return;
  }
  
  // Update all UI elements by category
  
  // Landing page and nav bar
  updateElement('title', languageData[lang].Title, true);
  updateElement('hero-title', languageData[lang].heroTitle, true);
  updateElement('hero-subtitle', languageData[lang].heroSubtitle, true);
  updateElement('hero-description', languageData[lang].heroDescription);
  updateElement('hero-button', languageData[lang].heroButtonText);

// Navbar
  updateElement('nav-home', languageData[lang].navHome);
  updateElement('nav-resources', languageData[lang].navResources);
  updateElement('nav-about', languageData[lang].navAbout);

  // About section
  updateElement('about-title', languageData[lang].aboutTitle);
  updateElement('about-p1', languageData[lang].aboutP1, true);
  updateElement('about-p2', languageData[lang].aboutP2, true);
  updateElement('about-p3', languageData[lang].aboutP3, true);
  updateElement('about-button', languageData[lang].aboutButton, true);

  // Resources section
  updateElement('resources-title', languageData[lang].resourcesTitle);
  updateElement('resources-looking', languageData[lang].resourcesLooking);
  updateElement('resources-drop-dashboards', languageData[lang].resourcesDropDashboards);
  updateElement('resources-drop-guides', languageData[lang].resourcesDropGuides);
  updateElement('resources-drop-reports', languageData[lang].resourcesDropReports);
  updateElement('resources-select', languageData[lang].resourcesSelect);
  updateElement('resources-title-dashboards', languageData[lang].resourcesTitleDashboards);
  updateElement('resources-title-guides', languageData[lang].resourcesTitleGuides);
  updateElement('resources-title-reports', languageData[lang].resourcesTitleReports);
  updateElement('resources-ccmdash', languageData[lang].resourcesCCMDash);
  updateElement('resources-uqddash', languageData[lang].resourcesUQDDash);
  updateElement('resources-r8dash', languageData[lang].resourcesR8Dash);

  // GF Feedback
  updateElement('feedback-title', languageData[lang].feedbackTitle);
  updateElement('feedback-p1', languageData[lang].feedbackP1);
  updateElement('feedback-p2', languageData[lang].feedbackP2);

  // Calendar
  updateElement('calendar-title', languageData[lang].calendarTitle);


}
    

// Function to initialize language on page load
function initializeLanguage() {
  // First check URL parameter
  const params = new URLSearchParams(window.location.search);
  const urlLang = params.get('lang');
  
  // Then check localStorage
  const storedLang = localStorage.getItem('preferredLanguage');
  
  // Choose language with priority: URL > localStorage > default ('EN')
  const lang = storedLang || urlLang  || 'EN';
  
  console.log('Initializing language:', lang, 
    urlLang ? '(from URL)' : 
    storedLang ? '(from localStorage)' : 
    '(default)');
  
  // Apply the selected language
  changeLanguage(lang);
}

  /* Langauge (end) */
// Make sure languageData is accessible globally
window.languageData = languageData;